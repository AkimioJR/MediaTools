{
    "schemes": [
        "HTTP"
    ],
    "swagger": "2.0",
    "info": {
        "description": "下一代媒体刮削\u0026整理工具",
        "title": "MediaTools API 文档",
        "contact": {},
        "version": "1.0"
    },
    "paths": {
        "/config/fanart": {
            "get": {
                "description": "获取 Fanart 配置",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "Fanart"
                ],
                "summary": "获取 Fanart 配置",
                "responses": {}
            },
            "post": {
                "description": "更新 Fanart 配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "Fanart"
                ],
                "summary": "更新 Fanart 配置",
                "parameters": [
                    {
                        "description": "Fanart 配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/config.FanartConfig"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/config/libraries": {
            "get": {
                "description": "获取媒体库配置",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "获取媒体库配置",
                "responses": {}
            },
            "post": {
                "description": "更新媒体库配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "更新媒体库配置",
                "parameters": [
                    {
                        "description": "媒体库配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/config.LibraryConfig"
                            }
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/config/log": {
            "get": {
                "description": "获取日志配置",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "日志"
                ],
                "summary": "获取日志配置",
                "responses": {}
            },
            "post": {
                "description": "更新日志配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "日志"
                ],
                "summary": "更新日志配置",
                "parameters": [
                    {
                        "description": "日志配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/config.LogConfig"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/config/media/custom_word": {
            "get": {
                "description": "获取自定义词配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "获取自定义词配置",
                "responses": {}
            },
            "post": {
                "description": "更新自定义词配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "更新自定义词配置",
                "parameters": [
                    {
                        "description": "自定义词配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/config.CustomWordConfig"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/config/media/format": {
            "get": {
                "description": "获取媒体格式配置",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "获取媒体格式配置",
                "responses": {}
            },
            "post": {
                "description": "更新媒体格式配置",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置"
                ],
                "summary": "更新媒体格式配置",
                "parameters": [
                    {
                        "description": "媒体格式配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/config.FormatConfig"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/config/tmdb": {
            "get": {
                "description": "获取 TMDB 配置",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "TMDB"
                ],
                "summary": "获取 TMDB 配置",
                "responses": {}
            },
            "post": {
                "description": "更新 TMDB 配置",
                "consumes": [
                    "application/json"
                ],
                "tags": [
                    "应用配置",
                    "TMDB"
                ],
                "summary": "更新 TMDB 配置",
                "parameters": [
                    {
                        "description": "TMDB 配置",
                        "name": "config",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/config.TMDBConfig"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/history/media": {
            "get": {
                "description": "查询媒体转移历史记录，支持根据 ID、时间范围、源路径、目标路径、转移类型和状态进行过滤",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "历史记录"
                ],
                "summary": "查询媒体转移历史记录",
                "parameters": [
                    {
                        "type": "string",
                        "description": "存储类型, 可选值为 'LocalStorage' 等",
                        "name": "storage_type",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "路径, 模糊匹配",
                        "name": "path",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "转移类型, 可选值为 'Copy'、'Move'、'Link'、'SoftLink' 等",
                        "name": "transfer_type",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "是否成功, true 或 false",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "最大返回数量, 默认值为 50",
                        "name": "count",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "页码, 从 1 开始, 默认值为 1",
                        "name": "page",
                        "in": "query"
                    }
                ],
                "responses": {}
            }
        },
        "/history/media/{id}": {
            "get": {
                "description": "根据 ID 查询媒体转移历史记录",
                "produces": [
                    "application/json"
                ],
                "summary": "查询媒体转移历史记录 by ID",
                "parameters": [
                    {
                        "type": "integer",
                        "format": "int64",
                        "description": "媒体转移历史记录 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {}
            },
            "delete": {
                "description": "根据 ID 删除媒体转移历史记录",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "summary": "删除媒体转移历史记录",
                "parameters": [
                    {
                        "type": "integer",
                        "format": "int64",
                        "description": "媒体转移历史记录 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "请求参数",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/schemas.DeleteMediaTransferHistoryRequest"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/library/archive": {
            "post": {
                "description": "手动归档媒体文件",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "媒体库管理"
                ],
                "summary": "手动归档媒体文件",
                "parameters": [
                    {
                        "description": "请求参数",
                        "name": "data",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/schemas.ArchiveMediaManualRequest"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/log/recent": {
            "get": {
                "description": "获取最近日志",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "日志"
                ],
                "summary": "获取最近日志",
                "responses": {}
            }
        },
        "/overview/{media_type}/{tmdb_id}": {
            "get": {
                "description": "根据媒体类型和 TMDB ID 获取对应的概述信息",
                "tags": [
                    "TMDB"
                ],
                "summary": "获取媒体概述信息",
                "parameters": [
                    {
                        "enum": [
                            "Movie",
                            "TV"
                        ],
                        "type": "string",
                        "description": "媒体类型",
                        "name": "media_type",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "TMDB ID",
                        "name": "tmdb_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "季数",
                        "name": "season",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "集数",
                        "name": "episode",
                        "in": "query"
                    }
                ],
                "responses": {}
            }
        },
        "/poster/{media_type}/{tmdb_id}": {
            "get": {
                "description": "根据媒体类型和 TMDB ID 获取对应的海报图片 URL",
                "tags": [
                    "TMDB"
                ],
                "summary": "获取媒体海报图片",
                "parameters": [
                    {
                        "enum": [
                            "Movie",
                            "TV"
                        ],
                        "type": "string",
                        "description": "媒体类型",
                        "name": "media_type",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "TMDB ID",
                        "name": "tmdb_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {}
            }
        },
        "/runtime/status": {
            "get": {
                "description": "获取程序运行状态信息",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "App"
                ],
                "summary": "获取程序运行状态",
                "responses": {}
            }
        },
        "/scrape/video": {
            "post": {
                "description": "刮削视频文件的元数据和相关信息",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "刮削"
                ],
                "summary": "刮削视频",
                "parameters": [
                    {
                        "description": "刮削请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/schemas.ScrapeRequest"
                        }
                    }
                ],
                "responses": {}
            }
        },
        "/task/transfer": {
            "get": {
                "description": "查询转移任务列表",
                "tags": [
                    "任务管理"
                ],
                "summary": "查询转移任务列表",
                "responses": {}
            }
        },
        "/task/transfer/{id}": {
            "get": {
                "description": "获取转移任务状态",
                "tags": [
                    "任务管理"
                ],
                "summary": "获取转移任务状态",
                "parameters": [
                    {
                        "type": "string",
                        "description": "任务 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {}
            },
            "delete": {
                "description": "取消转移任务",
                "tags": [
                    "任务管理"
                ],
                "summary": "取消转移任务",
                "parameters": [
                    {
                        "type": "string",
                        "description": "任务 ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {}
            }
        }
    },
    "definitions": {
        "config.CustomWordConfig": {
            "type": "object",
            "properties": {
                "customization": {
                    "description": "自定义占位置词",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "exclude_words": {
                    "description": "自定义排除词",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "identify_word": {
                    "description": "自定义识别词",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "config.FanartConfig": {
            "type": "object",
            "properties": {
                "api_key": {
                    "type": "string"
                },
                "api_url": {
                    "type": "string"
                },
                "languages": {
                    "description": "语言顺序",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "config.FormatConfig": {
            "type": "object",
            "properties": {
                "movie": {
                    "description": "电影格式",
                    "type": "string"
                },
                "tv": {
                    "description": "电视剧格式",
                    "type": "string"
                }
            }
        },
        "config.LibraryConfig": {
            "type": "object",
            "properties": {
                "dst_path": {
                    "description": "目标路径",
                    "type": "string"
                },
                "dst_type": {
                    "description": "目标类型",
                    "allOf": [
                        {
                            "$ref": "#/definitions/storage.StorageType"
                        }
                    ]
                },
                "name": {
                    "description": "媒体库名称",
                    "type": "string"
                },
                "notify": {
                    "description": "是否通知",
                    "type": "boolean"
                },
                "organize_by_category": {
                    "description": "是否按分类分文件夹",
                    "type": "boolean"
                },
                "organize_by_type": {
                    "description": "是否按类型分文件夹",
                    "type": "boolean"
                },
                "scrape": {
                    "description": "是否刮削",
                    "type": "boolean"
                },
                "src_path": {
                    "description": "源路径",
                    "type": "string"
                },
                "src_type": {
                    "description": "源类型",
                    "allOf": [
                        {
                            "$ref": "#/definitions/storage.StorageType"
                        }
                    ]
                },
                "transfer_type": {
                    "description": "传输类型",
                    "allOf": [
                        {
                            "$ref": "#/definitions/storage.TransferType"
                        }
                    ]
                }
            }
        },
        "config.LogConfig": {
            "type": "object",
            "properties": {
                "console_level": {
                    "description": "终端输出日志级别",
                    "type": "string"
                },
                "file_dir": {
                    "description": "日志文件目录",
                    "type": "string"
                },
                "file_level": {
                    "description": "文件日志级别",
                    "type": "string"
                }
            }
        },
        "config.TMDBConfig": {
            "type": "object",
            "properties": {
                "api_key": {
                    "description": "API Key",
                    "type": "string"
                },
                "api_url": {
                    "description": "TMDB API URL",
                    "type": "string"
                },
                "image_url": {
                    "description": "图片 API URL",
                    "type": "string"
                },
                "include_image_language": {
                    "description": "包含的图片语言",
                    "type": "string"
                },
                "language": {
                    "description": "语言",
                    "type": "string"
                }
            }
        },
        "meta.MediaType": {
            "type": "integer",
            "format": "int32",
            "enum": [
                0,
                1,
                2
            ],
            "x-enum-comments": {
                "MediaTypeMovie": "电影",
                "MediaTypeTV": "电视剧",
                "MediaTypeUnknown": "未知"
            },
            "x-enum-descriptions": [
                "未知",
                "电影",
                "电视剧"
            ],
            "x-enum-varnames": [
                "MediaTypeUnknown",
                "MediaTypeMovie",
                "MediaTypeTV"
            ]
        },
        "schemas.ArchiveMediaManualRequest": {
            "type": "object",
            "required": [
                "dst_dir",
                "src_file",
                "transfer_type"
            ],
            "properties": {
                "dst_dir": {
                    "description": "目标目录",
                    "allOf": [
                        {
                            "$ref": "#/definitions/schemas.FileInfoRequest"
                        }
                    ]
                },
                "episode_format": {
                    "description": "集数格式（用于集数定位）",
                    "type": "string"
                },
                "episode_offset": {
                    "description": "集数偏移（仅为制定集数是生效）",
                    "type": "string"
                },
                "episode_str": {
                    "description": "集数字符串，单集或多集范围",
                    "type": "string"
                },
                "media_type": {
                    "description": "可选字段",
                    "allOf": [
                        {
                            "$ref": "#/definitions/meta.MediaType"
                        }
                    ]
                },
                "organize_by_category": {
                    "description": "是否按分类整理",
                    "type": "boolean"
                },
                "organize_by_type": {
                    "description": "是否按类型整理",
                    "type": "boolean"
                },
                "part": {
                    "description": "指定分段",
                    "type": "string"
                },
                "scrape": {
                    "description": "是否刮削元数据",
                    "type": "boolean"
                },
                "season": {
                    "description": "季编号，-1 表示不设定",
                    "type": "integer"
                },
                "src_file": {
                    "description": "源文件",
                    "allOf": [
                        {
                            "$ref": "#/definitions/schemas.FileInfoRequest"
                        }
                    ]
                },
                "tmdb_id": {
                    "description": "TMDB ID",
                    "type": "integer"
                },
                "transfer_type": {
                    "description": "转移方法",
                    "allOf": [
                        {
                            "$ref": "#/definitions/storage.TransferType"
                        }
                    ]
                }
            }
        },
        "schemas.DeleteMediaTransferHistoryRequest": {
            "type": "object",
            "properties": {
                "delete_dst": {
                    "description": "删除目标文件",
                    "type": "boolean"
                },
                "delete_src": {
                    "description": "删除源文件",
                    "type": "boolean"
                }
            }
        },
        "schemas.FileInfoRequest": {
            "type": "object",
            "required": [
                "path",
                "storage_type"
            ],
            "properties": {
                "path": {
                    "type": "string"
                },
                "storage_type": {
                    "$ref": "#/definitions/storage.StorageType"
                }
            }
        },
        "schemas.ScrapeRequest": {
            "type": "object",
            "required": [
                "dst_file"
            ],
            "properties": {
                "dst_file": {
                    "$ref": "#/definitions/schemas.FileInfoRequest"
                },
                "media_type": {
                    "$ref": "#/definitions/meta.MediaType"
                },
                "tmdb_id": {
                    "type": "integer"
                }
            }
        },
        "storage.StorageType": {
            "type": "integer",
            "format": "int32",
            "enum": [
                0,
                1
            ],
            "x-enum-comments": {
                "StorageLocal": "本地文件系统",
                "StorageUnknown": "未知文件系统"
            },
            "x-enum-descriptions": [
                "未知文件系统",
                "本地文件系统"
            ],
            "x-enum-varnames": [
                "StorageUnknown",
                "StorageLocal"
            ]
        },
        "storage.TransferType": {
            "type": "integer",
            "format": "int32",
            "enum": [
                0,
                1,
                2,
                3,
                4
            ],
            "x-enum-comments": {
                "TransferCopy": "复制",
                "TransferLink": "硬链接",
                "TransferMove": "移动",
                "TransferSoftLink": "软链接",
                "TransferUnknown": "未知转移类型"
            },
            "x-enum-descriptions": [
                "未知转移类型",
                "复制",
                "移动",
                "硬链接",
                "软链接"
            ],
            "x-enum-varnames": [
                "TransferUnknown",
                "TransferCopy",
                "TransferMove",
                "TransferLink",
                "TransferSoftLink"
            ]
        }
    }
}